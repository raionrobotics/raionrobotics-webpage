

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Raisin External API Reference &mdash; Raisin External API Reference 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8d563738"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="#" class="icon icon-home">
            Raisin External API Reference
              <img src="_static/logo_f2-02.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Raisin External API Reference</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#integration-package">Integration Package</a><ul>
<li><a class="reference internal" href="#id1">획득 방법</a></li>
<li><a class="reference internal" href="#id2">패키지 구성</a></li>
<li><a class="reference internal" href="#id3">시스템 요구사항</a></li>
<li><a class="reference internal" href="#id4">네트워크 요구사항</a></li>
<li><a class="reference internal" href="#robot-id">Robot ID 확인</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-example-reference">API Example Reference</a><ul>
<li><a class="reference internal" href="#id7">헤더 포함</a></li>
<li><a class="reference internal" href="#id8">기본 워크플로우</a></li>
<li><a class="reference internal" href="#data-types">Data Types</a></li>
<li><a class="reference internal" href="#autonomyclient-methods">AutonomyClient Methods</a></li>
<li><a class="reference internal" href="#gps">GPS 사용 시 주의사항</a></li>
</ul>
</li>
<li><a class="reference internal" href="#direct-network-api">Direct Network API</a><ul>
<li><a class="reference internal" href="#id15">헤더 포함</a></li>
<li><a class="reference internal" href="#id16">연결 패턴</a></li>
<li><a class="reference internal" href="#id17">서비스 클라이언트 생성</a></li>
<li><a class="reference internal" href="#id18">서비스 호출 예시</a></li>
<li><a class="reference internal" href="#id19">구독자 생성</a></li>
</ul>
</li>
<li><a class="reference internal" href="#service-interface-reference">Service Interface Reference</a><ul>
<li><a class="reference internal" href="#planning-set-waypoints">planning/set_waypoints</a></li>
<li><a class="reference internal" href="#planning-get-waypoints">planning/get_waypoints</a></li>
<li><a class="reference internal" href="#planning-append-waypoint">planning/append_waypoint</a></li>
<li><a class="reference internal" href="#set-map-setlasermap">set_map (SetLaserMap)</a></li>
<li><a class="reference internal" href="#waypoint-message">Waypoint Message</a></li>
</ul>
</li>
<li><a class="reference internal" href="#complete-examples">Complete Examples</a><ul>
<li><a class="reference internal" href="#waypoint">기본 Waypoint 제어</a></li>
<li><a class="reference internal" href="#id20">실시간 모니터링</a></li>
<li><a class="reference internal" href="#id21">무한 순찰</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gui-demo-simple-gui">GUI Demo (simple_gui)</a><ul>
<li><a class="reference internal" href="#id22">실행 방법</a></li>
<li><a class="reference internal" href="#id23">워크플로우</a></li>
<li><a class="reference internal" href="#id24">키보드 단축키</a></li>
<li><a class="reference internal" href="#id25">마우스 조작</a></li>
<li><a class="reference internal" href="#id26">상태 표시</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cmake-configuration">CMake Configuration</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li><a class="reference internal" href="#id27">연결 실패</a></li>
<li><a class="reference internal" href="#id30">맵 로드 실패</a></li>
<li><a class="reference internal" href="#id35">로봇이 움직이지 않음</a></li>
<li><a class="reference internal" href="#id38">서비스 응답 메시지 목록</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id39">관련 문서</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Raisin External API Reference</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Raisin External API Reference</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="raisin-external-api-reference">
<h1>Raisin External API Reference<a class="headerlink" href="#raisin-external-api-reference" title="Link to this heading"></a></h1>
<p>외부 시스템에서 Raibo2의 자율주행 기능을 제어하기 위한 API 문서입니다.</p>
<p><a class="reference external" href="../en/index.html">English Version</a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Raisin 시스템은 외부 연동을 위해 두 가지 방식을 제공합니다:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 40.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>방식</p></th>
<th class="head"><p>설명</p></th>
<th class="head"><p>용도</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>API Example</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AutonomyClient</span></code> 래퍼 클래스 예제 코드</p></td>
<td><p>빠른 시작, 참고용 구현체</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Direct Network</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">raisin_network</span></code> 라이브러리 직접 사용</p></td>
<td><p>커스텀 서비스 호출, 세밀한 제어 필요 시</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>API Example (AutonomyClient)</strong> 는 공식 지원 SDK가 아닌 예제 코드입니다.
외부 개발자가 Raisin 플랫폼을 연동하는 방법을 보여주는 참고용 구현체이며,
필요에 따라 수정하여 사용하시기 바랍니다.</p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+------------------------------------------+
|           External Application           |
+------------------------------------------+
|  Option A: API Example                   |
|  +------------------------------------+  |
|  |  #include &quot;autonomy_client.hpp&quot;   |  |
|  |  AutonomyClient client;           |  |
|  |  client.connect(&quot;ROBOT_ID&quot;);      |  |
|  |  client.setMap(...);              |  |
|  |  client.setWaypoints(...);        |  |
|  +------------------------------------+  |
+------------------------------------------+
|  Option B: Direct Network                |
|  +------------------------------------+  |
|  |  raisin::Network network;         |  |
|  |  raisin::Node node;               |  |
|  |  auto client = node.createClient  |  |
|  |      &lt;SetWaypoints&gt;(...);         |  |
|  +------------------------------------+  |
+------------------------------------------+
                  |
                  | WebSocket
                  v
+------------------------------------------+
|                 Raibo2                   |
|  +----------------+  +----------------+  |
|  | Autonomy Plugin|  | Fast-LIO Plugin|  |
|  | - Waypoints    |  | - Localization |  |
|  | - Navigation   |  | - Map Loading  |  |
|  +----------------+  +----------------+  |
+------------------------------------------+
</pre></div>
</div>
</section>
<section id="integration-package">
<h2>Integration Package<a class="headerlink" href="#integration-package" title="Link to this heading"></a></h2>
<section id="id1">
<h3>획득 방법<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>연동 패키지는 Raion Robotics에서 제공합니다. 다음 방법으로 요청하세요:</p>
<ul class="simple">
<li><p><strong>이메일</strong>: <a class="reference external" href="mailto:support&#37;&#52;&#48;raionrobotics&#46;com">support<span>&#64;</span>raionrobotics<span>&#46;</span>com</a></p></li>
<li><p><strong>웹사이트</strong>: <a class="reference external" href="https://raionrobotics.com/support">https://raionrobotics.com/support</a></p></li>
</ul>
</section>
<section id="id2">
<h3>패키지 구성<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">raisin_sdk_install/</span></code> 폴더에는 다음이 포함됩니다:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>raisin_sdk_install/
├── include/                    # 헤더 파일
│   ├── raisin_network/         # 네트워크 라이브러리
│   ├── raisin_interfaces/      # 메시지/서비스 정의
│   └── ...
└── lib/                        # 컴파일된 라이브러리
    ├── libraisin_network.so
    ├── libraisin_interfaces.so
    └── ...
</pre></div>
</div>
</section>
<section id="id3">
<h3>시스템 요구사항<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ubuntu 22.04</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>libeigen3-dev<span class="w"> </span>libssl-dev<span class="w"> </span>libpcl-dev<span class="w"> </span>libopencv-dev
</pre></div>
</div>
</section>
<section id="id4">
<h3>네트워크 요구사항<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>로봇과 클라이언트가 <a href="#id5"><span class="problematic" id="id6">**</span></a>동일 네트워크**에 있어야 합니다</p></li>
<li><p>멀티캐스트 트래픽이 허용되어야 합니다 (Robot ID 자동 발견용)</p></li>
<li><p>방화벽: TCP/UDP 포트 8080, 38371 등 허용 필요</p></li>
</ul>
</section>
<section id="robot-id">
<h3>Robot ID 확인<a class="headerlink" href="#robot-id" title="Link to this heading"></a></h3>
<p>Robot ID는 <code class="docutils literal notranslate"><span class="pre">raisin_master</span></code> 실행 시 콘솔에 출력됩니다:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[raisin_master] Robot ID: railab_raibo-3614732983840
[raisin_master] Listening on port 38371
</pre></div>
</div>
<p>또는 raisin_gui에서 확인할 수 있습니다.</p>
</section>
</section>
<hr class="docutils" />
<section id="api-example-reference">
<h2>API Example Reference<a class="headerlink" href="#api-example-reference" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">AutonomyClient</span></code> 래퍼 클래스를 사용한 예제 코드입니다. 필요에 따라 수정하여 사용하세요.</p>
<section id="id7">
<h3>헤더 포함<a class="headerlink" href="#id7" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;raisin_sdk/autonomy_client.hpp&quot;</span>
</pre></div>
</div>
</section>
<section id="id8">
<h3>기본 워크플로우<a class="headerlink" href="#id8" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1. 클라이언트 생성</span>
<span class="n">raisin_sdk</span><span class="o">::</span><span class="n">AutonomyClient</span><span class="w"> </span><span class="n">client</span><span class="p">(</span><span class="s">&quot;my_app&quot;</span><span class="p">);</span>

<span class="c1">// 2. 로봇 연결</span>
<span class="n">client</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;ROBOT_ID&quot;</span><span class="p">);</span>

<span class="c1">// 3. 맵 로드 (Localization 활성화)</span>
<span class="n">client</span><span class="p">.</span><span class="n">setMap</span><span class="p">(</span><span class="s">&quot;/path/to/map.pcd&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;my_map&quot;</span><span class="p">);</span>

<span class="c1">// 4. Waypoint 설정 (frame은 반드시 map_name과 동일해야 함!)</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="o">&gt;</span><span class="w"> </span><span class="n">waypoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;my_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w">   </span><span class="c1">// &quot;my_map&quot; 사용</span>
<span class="w">    </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;my_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">),</span>
<span class="p">};</span>
<span class="n">client</span><span class="p">.</span><span class="n">setWaypoints</span><span class="p">(</span><span class="n">waypoints</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>

<span class="c1">// 5. 상태 모니터링</span>
<span class="k">auto</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">getMissionStatus</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="data-types">
<h3>Data Types<a class="headerlink" href="#data-types" title="Link to this heading"></a></h3>
<p><strong>Waypoint</strong> - 네비게이션 목표 지점</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">Waypoint</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">frame</span><span class="p">;</span><span class="w">  </span><span class="c1">// 좌표 프레임 (중요!)</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">;</span><span class="w">     </span><span class="c1">// 좌표</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">use_z</span><span class="p">;</span><span class="w">         </span><span class="c1">// Z 좌표 사용 여부</span>
<span class="p">};</span>

<span class="c1">// 생성 방법</span>
<span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;map_name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span><span class="w">           </span><span class="c1">// 맵 좌표</span>
<span class="n">Waypoint</span><span class="o">::</span><span class="n">GPS</span><span class="p">(</span><span class="n">latitude</span><span class="p">,</span><span class="w"> </span><span class="n">longitude</span><span class="p">);</span><span class="w">   </span><span class="c1">// GPS 좌표 (GPS 모듈 필요)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>frame 이름은 setMap()에서 지정한 map_name과 반드시 일치해야 합니다!</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 올바른 예시</span>
<span class="n">client</span><span class="p">.</span><span class="n">setMap</span><span class="p">(</span><span class="s">&quot;/path/map.pcd&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;office_map&quot;</span><span class="p">);</span>
<span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;office_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span><span class="w">  </span><span class="c1">// ✓ 동일한 이름</span>

<span class="c1">// 잘못된 예시</span>
<span class="n">client</span><span class="p">.</span><span class="n">setMap</span><span class="p">(</span><span class="s">&quot;/path/map.pcd&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;office_map&quot;</span><span class="p">);</span>
<span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span><span class="w">  </span><span class="c1">// ✗ 이름 불일치 - 동작 안함!</span>
</pre></div>
</div>
</div>
<p><strong>MissionStatus</strong> - 미션 상태</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">MissionStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Waypoint</span><span class="o">&gt;</span><span class="w"> </span><span class="n">waypoints</span><span class="p">;</span><span class="w">  </span><span class="c1">// 현재 waypoint 목록</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">current_index</span><span class="p">;</span><span class="w">            </span><span class="c1">// 현재 목표 인덱스</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">repetition</span><span class="p">;</span><span class="w">               </span><span class="c1">// 남은 반복 횟수 (0=무한)</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">valid</span><span class="p">;</span><span class="w">                       </span><span class="c1">// 데이터 유효성</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>ServiceResult</strong> - 서비스 호출 결과</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">ServiceResult</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">success</span><span class="p">;</span><span class="w">         </span><span class="c1">// 성공 여부</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">message</span><span class="p">;</span><span class="w">  </span><span class="c1">// 결과 메시지</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>RobotState</strong> - 로봇 상태 (Odometry)</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">RobotState</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">;</span><span class="w">    </span><span class="c1">// 위치 (meters)</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">yaw</span><span class="p">;</span><span class="w">        </span><span class="c1">// 방향 (radians)</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">vx</span><span class="p">,</span><span class="w"> </span><span class="n">vy</span><span class="p">;</span><span class="w">     </span><span class="c1">// 선속도 (m/s)</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">omega</span><span class="p">;</span><span class="w">      </span><span class="c1">// 각속도 (rad/s)</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">valid</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>Point3D</strong> - 포인트 클라우드 점</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">Point3D</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
</section>
<section id="autonomyclient-methods">
<h3>AutonomyClient Methods<a class="headerlink" href="#autonomyclient-methods" title="Link to this heading"></a></h3>
<p><strong>connect()</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">robot_id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">timeout_sec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
</pre></div>
</div>
<p>로봇에 연결합니다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">robot_id</span></code>: Robot ID 또는 IP 주소</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout_sec</span></code>: 연결 타임아웃 (초)</p></li>
<li><p><strong>반환</strong>: 연결 성공 여부</p></li>
</ul>
<p><strong>setMap()</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ServiceResult</span><span class="w"> </span><span class="nf">setMap</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pcd_path</span><span class="p">,</span>
<span class="w">                     </span><span class="kt">double</span><span class="w"> </span><span class="n">initial_x</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">initial_y</span><span class="p">,</span>
<span class="w">                     </span><span class="kt">double</span><span class="w"> </span><span class="n">initial_z</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">initial_yaw</span><span class="p">,</span>
<span class="w">                     </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">map_name</span><span class="p">);</span>
</pre></div>
</div>
<p>PCD 맵 파일을 로드하고 Localization을 초기화합니다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pcd_path</span></code>: PCD 파일 경로 (<strong>클라이언트 PC에 있는 파일</strong>, 로봇으로 전송됨)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initial_x/y/z</span></code>: 맵 내 로봇 초기 위치 (로봇이 물리적으로 있는 위치를 맵 좌표로 입력)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initial_yaw</span></code>: 초기 방향 (radians)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map_name</span></code>: 맵 프레임 이름 (<strong>Waypoint frame과 일치해야 함</strong>)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PCD 맵은 사전에 SLAM으로 생성해야 합니다. raisin_gui의 Mapping 기능을 사용하거나,
Fast-LIO 플러그인으로 직접 생성할 수 있습니다.</p>
</div>
<p><strong>setWaypoints()</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ServiceResult</span><span class="w"> </span><span class="nf">setWaypoints</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Waypoint</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">waypoints</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">repetition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">start_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<p>Waypoint 목록을 설정하고 네비게이션을 시작합니다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">waypoints</span></code>: Waypoint 목록</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">repetition</span></code>: 반복 횟수</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> = 무한 순찰</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> = 1회 통과 (기본값)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">N</span></code> = N회 반복</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">start_index</span></code>: 시작 waypoint 인덱스</p></li>
</ul>
<p><strong>getMissionStatus()</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">MissionStatus</span><span class="w"> </span><span class="nf">getMissionStatus</span><span class="p">();</span>
</pre></div>
</div>
<p>현재 미션 상태를 조회합니다.</p>
<p><strong>appendWaypoint()</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ServiceResult</span><span class="w"> </span><span class="nf">appendWaypoint</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Waypoint</span><span class="o">&amp;</span><span class="w"> </span><span class="n">waypoint</span><span class="p">);</span>
</pre></div>
</div>
<p>현재 미션 큐에 waypoint를 추가합니다.</p>
<p><strong>stopNavigation()</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ServiceResult</span><span class="w"> </span><span class="nf">stopNavigation</span><span class="p">();</span>
</pre></div>
</div>
<p>자율주행을 중지합니다 (빈 waypoint 목록 설정).</p>
<p><strong>startPatrol()</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ServiceResult</span><span class="w"> </span><span class="nf">startPatrol</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Waypoint</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">waypoints</span><span class="p">);</span>
</pre></div>
</div>
<p>무한 순찰을 시작합니다 (<a href="#id9"><span class="problematic" id="id10">``</span></a>setWaypoints(waypoints, 0)``과 동일).</p>
<p><strong>subscribeOdometry()</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">subscribeOdometry</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">RobotState</span><span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">callback</span><span class="p">);</span>
</pre></div>
</div>
<p>Odometry 데이터를 실시간 구독합니다.</p>
<p><strong>subscribePointCloud()</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">subscribePointCloud</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point3D</span><span class="o">&gt;&amp;</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">callback</span><span class="p">);</span>
</pre></div>
</div>
<p>LiDAR 포인트 클라우드를 실시간 구독합니다.</p>
<p><strong>getRobotState() / getLatestPointCloud()</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">RobotState</span><span class="w"> </span><span class="nf">getRobotState</span><span class="p">();</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point3D</span><span class="o">&gt;</span><span class="w"> </span><span class="n">getLatestPointCloud</span><span class="p">();</span>
</pre></div>
</div>
<p>마지막으로 수신한 데이터를 반환합니다 (thread-safe).</p>
<p><strong>loadPCD() (static)</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point3D</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loadPCD</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pcd_path</span><span class="p">);</span>
</pre></div>
</div>
<p>PCD 파일을 로드합니다 (로봇 전송 없이 시각화용).</p>
</section>
<section id="gps">
<h3>GPS 사용 시 주의사항<a class="headerlink" href="#gps" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Waypoint</span><span class="o">::</span><span class="n">GPS</span><span class="p">(</span><span class="mf">37.5665</span><span class="p">,</span><span class="w"> </span><span class="mf">126.9780</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a href="#id11"><span class="problematic" id="id12">**</span></a>GPS 모듈이 로봇에 장착**되어 있어야 합니다</p></li>
<li><p>GPS fix가 유효해야 합니다 (<code class="docutils literal notranslate"><span class="pre">/fix</span></code> 토픽)</p></li>
<li><p>GPS가 없으면 <a href="#id13"><span class="problematic" id="id14">``</span></a>setWaypoints()``는 성공하지만 로봇이 목표에 도달하지 못합니다</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="direct-network-api">
<h2>Direct Network API<a class="headerlink" href="#direct-network-api" title="Link to this heading"></a></h2>
<p>고급 사용자를 위한 <code class="docutils literal notranslate"><span class="pre">raisin_network</span></code> 직접 사용 방법입니다.</p>
<section id="id15">
<h3>헤더 포함<a class="headerlink" href="#id15" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;raisin_network/raisin.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;raisin_network/network.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;raisin_network/node.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;raisin_interfaces/srv/set_waypoints.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;raisin_interfaces/srv/get_waypoints.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;raisin_interfaces/srv/append_waypoint.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;raisin_interfaces/srv/set_laser_map.hpp&quot;</span>
</pre></div>
</div>
</section>
<section id="id16">
<h3>연결 패턴<a class="headerlink" href="#id16" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1. 초기화</span>
<span class="n">raisin</span><span class="o">::</span><span class="n">raisinInit</span><span class="p">();</span>

<span class="c1">// 2. 네트워크 생성</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">threads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{{</span><span class="s">&quot;main&quot;</span><span class="p">}};</span>
<span class="k">auto</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">raisin</span><span class="o">::</span><span class="n">Network</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;my_client&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1">// 클라이언트 ID</span>
<span class="w">    </span><span class="s">&quot;external&quot;</span><span class="p">,</span><span class="w">       </span><span class="c1">// 디바이스 타입</span>
<span class="w">    </span><span class="n">threads</span>
<span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>

<span class="c1">// 3. 로봇 연결</span>
<span class="k">auto</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">network</span><span class="o">-&gt;</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;ROBOT_ID&quot;</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">connection</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Connection failed&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>

<span class="c1">// 4. Node 생성</span>
<span class="n">raisin</span><span class="o">::</span><span class="n">Node</span><span class="w"> </span><span class="nf">node</span><span class="p">(</span><span class="n">network</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="id17">
<h3>서비스 클라이언트 생성<a class="headerlink" href="#id17" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Waypoint 설정 클라이언트</span>
<span class="k">auto</span><span class="w"> </span><span class="n">setClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">createClient</span><span class="o">&lt;</span><span class="n">raisin</span><span class="o">::</span><span class="n">raisin_interfaces</span><span class="o">::</span><span class="n">srv</span><span class="o">::</span><span class="n">SetWaypoints</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;planning/set_waypoints&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">connection</span><span class="p">);</span>

<span class="c1">// Waypoint 조회 클라이언트</span>
<span class="k">auto</span><span class="w"> </span><span class="n">getClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">createClient</span><span class="o">&lt;</span><span class="n">raisin</span><span class="o">::</span><span class="n">raisin_interfaces</span><span class="o">::</span><span class="n">srv</span><span class="o">::</span><span class="n">GetWaypoints</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;planning/get_waypoints&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">connection</span><span class="p">);</span>

<span class="c1">// Waypoint 추가 클라이언트</span>
<span class="k">auto</span><span class="w"> </span><span class="n">appendClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">createClient</span><span class="o">&lt;</span><span class="n">raisin</span><span class="o">::</span><span class="n">raisin_interfaces</span><span class="o">::</span><span class="n">srv</span><span class="o">::</span><span class="n">AppendWaypoint</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;planning/append_waypoint&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">connection</span><span class="p">);</span>

<span class="c1">// 맵 설정 클라이언트</span>
<span class="k">auto</span><span class="w"> </span><span class="n">mapClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">createClient</span><span class="o">&lt;</span><span class="n">raisin</span><span class="o">::</span><span class="n">raisin_interfaces</span><span class="o">::</span><span class="n">srv</span><span class="o">::</span><span class="n">SetLaserMap</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;set_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">connection</span><span class="p">);</span>

<span class="c1">// 서비스 대기</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">setClient</span><span class="o">-&gt;</span><span class="n">waitForService</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Service not available&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id18">
<h3>서비스 호출 예시<a class="headerlink" href="#id18" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// SetWaypoints 요청 생성</span>
<span class="k">auto</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">raisin</span><span class="o">::</span><span class="n">raisin_interfaces</span><span class="o">::</span><span class="n">srv</span><span class="o">::</span><span class="n">SetWaypoints</span><span class="o">::</span><span class="n">Request</span><span class="o">&gt;</span><span class="p">();</span>

<span class="n">raisin</span><span class="o">::</span><span class="n">raisin_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Waypoint</span><span class="w"> </span><span class="n">wp</span><span class="p">;</span>
<span class="n">wp</span><span class="p">.</span><span class="n">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;my_map&quot;</span><span class="p">;</span>
<span class="n">wp</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5.0</span><span class="p">;</span>
<span class="n">wp</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="n">wp</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="n">wp</span><span class="p">.</span><span class="n">use_z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="n">request</span><span class="o">-&gt;</span><span class="n">waypoints</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">wp</span><span class="p">);</span>

<span class="n">request</span><span class="o">-&gt;</span><span class="n">repetition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="n">request</span><span class="o">-&gt;</span><span class="n">current_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="c1">// 비동기 호출</span>
<span class="k">auto</span><span class="w"> </span><span class="n">future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setClient</span><span class="o">-&gt;</span><span class="n">asyncSendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">future</span><span class="p">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">future_status</span><span class="o">::</span><span class="n">ready</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">future</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Success: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">response</span><span class="o">-&gt;</span><span class="n">success</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Message: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">response</span><span class="o">-&gt;</span><span class="n">message</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id19">
<h3>구독자 생성<a class="headerlink" href="#id19" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Odometry 구독</span>
<span class="k">auto</span><span class="w"> </span><span class="n">odomSub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">createSubscriber</span><span class="o">&lt;</span><span class="n">raisin</span><span class="o">::</span><span class="n">nav_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Odometry</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;/Odometry&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">connection</span><span class="p">,</span>
<span class="w">    </span><span class="p">[](</span><span class="k">const</span><span class="w"> </span><span class="n">raisin</span><span class="o">::</span><span class="n">nav_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">Odometry</span><span class="o">::</span><span class="n">SharedPtr</span><span class="o">&amp;</span><span class="w"> </span><span class="n">msg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Position: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">pose</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span>
<span class="w">                  </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">pose</span><span class="p">.</span><span class="n">pose</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">});</span>

<span class="c1">// PointCloud 구독</span>
<span class="k">auto</span><span class="w"> </span><span class="n">cloudSub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">createSubscriber</span><span class="o">&lt;</span><span class="n">raisin</span><span class="o">::</span><span class="n">sensor_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">PointCloud2</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;/cloud_registered&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">connection</span><span class="p">,</span>
<span class="w">    </span><span class="p">[](</span><span class="k">const</span><span class="w"> </span><span class="n">raisin</span><span class="o">::</span><span class="n">sensor_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">PointCloud2</span><span class="o">::</span><span class="n">SharedPtr</span><span class="o">&amp;</span><span class="w"> </span><span class="n">msg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Points: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">height</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">});</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="service-interface-reference">
<h2>Service Interface Reference<a class="headerlink" href="#service-interface-reference" title="Link to this heading"></a></h2>
<p>사용 가능한 서비스 인터페이스 정의입니다.</p>
<section id="planning-set-waypoints">
<h3>planning/set_waypoints<a class="headerlink" href="#planning-set-waypoints" title="Link to this heading"></a></h3>
<p>Waypoint 목록을 설정합니다.</p>
<p><strong>Request:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>waypoints</p></td>
<td><p>Waypoint[]</p></td>
<td><p>Waypoint 배열</p></td>
</tr>
<tr class="row-odd"><td><p>repetition</p></td>
<td><p>uint8</p></td>
<td><p>반복 횟수 (0=무한)</p></td>
</tr>
<tr class="row-even"><td><p>current_index</p></td>
<td><p>uint8</p></td>
<td><p>시작 인덱스</p></td>
</tr>
</tbody>
</table>
<p><strong>Response:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>success</p></td>
<td><p>bool</p></td>
<td><p>성공 여부</p></td>
</tr>
<tr class="row-odd"><td><p>message</p></td>
<td><p>string</p></td>
<td><p>결과 메시지</p></td>
</tr>
</tbody>
</table>
<p><strong>가능한 Response 메시지:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;set</span> <span class="pre">waypoint</span> <span class="pre">success&quot;</span></code> - 성공</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;waypoint</span> <span class="pre">list</span> <span class="pre">is</span> <span class="pre">empty&quot;</span></code> - waypoint가 비어있음</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;service</span> <span class="pre">timeout&quot;</span></code> - 서비스 응답 없음</p></li>
</ul>
</section>
<section id="planning-get-waypoints">
<h3>planning/get_waypoints<a class="headerlink" href="#planning-get-waypoints" title="Link to this heading"></a></h3>
<p>현재 미션 상태를 조회합니다.</p>
<p><strong>Request:</strong> (empty)</p>
<p><strong>Response:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>success</p></td>
<td><p>bool</p></td>
<td><p>성공 여부</p></td>
</tr>
<tr class="row-odd"><td><p>message</p></td>
<td><p>string</p></td>
<td><p>결과 메시지</p></td>
</tr>
<tr class="row-even"><td><p>waypoints</p></td>
<td><p>Waypoint[]</p></td>
<td><p>현재 waypoint 목록</p></td>
</tr>
<tr class="row-odd"><td><p>repetition</p></td>
<td><p>uint8</p></td>
<td><p>남은 반복 횟수</p></td>
</tr>
<tr class="row-even"><td><p>current_index</p></td>
<td><p>uint8</p></td>
<td><p>현재 목표 인덱스</p></td>
</tr>
</tbody>
</table>
</section>
<section id="planning-append-waypoint">
<h3>planning/append_waypoint<a class="headerlink" href="#planning-append-waypoint" title="Link to this heading"></a></h3>
<p>Waypoint를 큐에 추가합니다.</p>
<p><strong>Request:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>waypoint</p></td>
<td><p>Waypoint</p></td>
<td><p>추가할 waypoint</p></td>
</tr>
</tbody>
</table>
<p><strong>Response:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>success</p></td>
<td><p>bool</p></td>
<td><p>성공 여부</p></td>
</tr>
<tr class="row-odd"><td><p>message</p></td>
<td><p>string</p></td>
<td><p>결과 메시지</p></td>
</tr>
</tbody>
</table>
</section>
<section id="set-map-setlasermap">
<h3>set_map (SetLaserMap)<a class="headerlink" href="#set-map-setlasermap" title="Link to this heading"></a></h3>
<p>PCD 맵을 로드하고 Localization을 초기화합니다.</p>
<p><strong>Request:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>string</p></td>
<td><p>맵 프레임 이름</p></td>
</tr>
<tr class="row-odd"><td><p>pc</p></td>
<td><p>PointCloud2</p></td>
<td><p>포인트 클라우드 데이터</p></td>
</tr>
<tr class="row-even"><td><p>initial_pose</p></td>
<td><p>Pose</p></td>
<td><p>초기 로봇 자세</p></td>
</tr>
</tbody>
</table>
<p><strong>Response:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>success</p></td>
<td><p>bool</p></td>
<td><p>성공 여부</p></td>
</tr>
<tr class="row-odd"><td><p>message</p></td>
<td><p>string</p></td>
<td><p>결과 메시지</p></td>
</tr>
</tbody>
</table>
<p><strong>가능한 Response 메시지:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;Map</span> <span class="pre">saved.&quot;</span></code> - 성공</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;service</span> <span class="pre">timeout&quot;</span></code> - Fast-LIO 플러그인 미로드</p></li>
</ul>
</section>
<section id="waypoint-message">
<h3>Waypoint Message<a class="headerlink" href="#waypoint-message" title="Link to this heading"></a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>string frame      # 좌표 프레임: &quot;map_name&quot;, &quot;gps&quot;, &quot;odom&quot;
float64 x         # X 좌표 (GPS: latitude)
float64 y         # Y 좌표 (GPS: longitude)
float64 z         # Z 좌표 (GPS: altitude)
bool use_z        # Z 좌표 검사 여부
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="complete-examples">
<h2>Complete Examples<a class="headerlink" href="#complete-examples" title="Link to this heading"></a></h2>
<section id="waypoint">
<h3>기본 Waypoint 제어<a class="headerlink" href="#waypoint" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;chrono&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;raisin_sdk/autonomy_client.hpp&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Usage: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &lt;robot_id&gt; [pcd_path]&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">robotId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">pcdPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;../maps/office1_example.pcd&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 클라이언트 생성 및 연결</span>
<span class="w">    </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">AutonomyClient</span><span class="w"> </span><span class="n">client</span><span class="p">(</span><span class="s">&quot;waypoint_example&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Connecting to &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">robotId</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;...&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">client</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">robotId</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Connection failed!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Connected!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 맵 로드</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Loading map...&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">mapResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">setMap</span><span class="p">(</span><span class="n">pcdPath</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sdk_map&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">mapResult</span><span class="p">.</span><span class="n">success</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Map load failed: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">mapResult</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Map loaded: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">mapResult</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Waypoint 설정 (frame은 반드시 map_name과 동일!)</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="o">&gt;</span><span class="w"> </span><span class="n">waypoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;sdk_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span>
<span class="w">        </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;sdk_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span>
<span class="w">        </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;sdk_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">),</span>
<span class="w">        </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;sdk_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">),</span>
<span class="w">        </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;sdk_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Setting &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">waypoints</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; waypoints...&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">setWaypoints</span><span class="p">(</span><span class="n">waypoints</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">result</span><span class="p">.</span><span class="n">success</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Failed: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Navigation started!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 진행 상황 모니터링</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">getMissionStatus</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="p">.</span><span class="n">valid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\r</span><span class="s">Progress: waypoint &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">status</span><span class="p">.</span><span class="n">current_index</span>
<span class="w">                      </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">status</span><span class="p">.</span><span class="n">waypoints</span><span class="p">.</span><span class="n">size</span><span class="p">()</span>
<span class="w">                      </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; | Laps: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">status</span><span class="p">.</span><span class="n">repetition</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;   &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">flush</span><span class="p">;</span>

<span class="w">            </span><span class="c1">// 미션 완료 확인</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="p">.</span><span class="n">current_index</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">status</span><span class="p">.</span><span class="n">waypoints</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">                </span><span class="n">status</span><span class="p">.</span><span class="n">repetition</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Mission complete!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">disconnect</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id20">
<h3>실시간 모니터링<a class="headerlink" href="#id20" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;atomic&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;csignal&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;raisin_sdk/autonomy_client.hpp&quot;</span>

<span class="n">std</span><span class="o">::</span><span class="n">atomic</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"> </span><span class="n">running</span><span class="p">{</span><span class="nb">true</span><span class="p">};</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">signalHandler</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">signal</span><span class="p">(</span><span class="n">SIGINT</span><span class="p">,</span><span class="w"> </span><span class="n">signalHandler</span><span class="p">);</span>

<span class="w">    </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">AutonomyClient</span><span class="w"> </span><span class="n">client</span><span class="p">(</span><span class="s">&quot;monitor&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">client</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Odometry 구독</span>
<span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">subscribeOdometry</span><span class="p">([](</span><span class="k">const</span><span class="w"> </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">RobotState</span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Position: (&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;) &quot;</span>
<span class="w">                  </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Yaw: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">yaw</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; rad&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// PointCloud 구독</span>
<span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">subscribePointCloud</span><span class="p">([](</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Point3D</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">cloud</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;LiDAR points: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cloud</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Monitoring... (Ctrl+C to stop)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id21">
<h3>무한 순찰<a class="headerlink" href="#id21" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 무한 순찰 시작</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="o">&gt;</span><span class="w"> </span><span class="n">patrol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;sdk_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span>
<span class="w">    </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;sdk_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span>
<span class="w">    </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;sdk_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w"> </span><span class="mf">10.0</span><span class="p">),</span>
<span class="w">    </span><span class="n">raisin_sdk</span><span class="o">::</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;sdk_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">10.0</span><span class="p">),</span>
<span class="p">};</span>

<span class="n">client</span><span class="p">.</span><span class="n">startPatrol</span><span class="p">(</span><span class="n">patrol</span><span class="p">);</span><span class="w">  </span><span class="c1">// 또는 client.setWaypoints(patrol, 0);</span>

<span class="c1">// 순찰 중지</span>
<span class="n">client</span><span class="p">.</span><span class="n">stopNavigation</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="gui-demo-simple-gui">
<h2>GUI Demo (simple_gui)<a class="headerlink" href="#gui-demo-simple-gui" title="Link to this heading"></a></h2>
<p>OpenCV 기반의 시각화 데모 프로그램입니다. 맵과 로봇 위치를 시각화하고, 마우스로 Waypoint를 설정할 수 있습니다.</p>
<section id="id22">
<h3>실행 방법<a class="headerlink" href="#id22" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./simple_gui<span class="w"> </span>&lt;robot_id&gt;<span class="w"> </span><span class="o">[</span>pcd_path<span class="o">]</span>

<span class="c1"># 예시</span>
./simple_gui<span class="w"> </span>railab_raibo-3614732983840
./simple_gui<span class="w"> </span>railab_raibo-3614732983840<span class="w"> </span>../maps/office1_example.pcd
</pre></div>
</div>
</section>
<section id="id23">
<h3>워크플로우<a class="headerlink" href="#id23" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">O</span></code> 키로 PCD 맵 파일 열기</p></li>
<li><p>맵에서 클릭하여 로봇 초기 위치 설정</p></li>
<li><p>로봇이 바라보는 방향으로 클릭하여 방향(Yaw) 설정</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">S</span></code> 키로 맵 전송 및 Localization 시작</p></li>
<li><p>맵에서 클릭하여 Waypoint 추가</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">W</span></code> 키로 Waypoint 전송 및 자율주행 시작</p></li>
</ol>
</section>
<section id="id24">
<h3>키보드 단축키<a class="headerlink" href="#id24" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>키</p></th>
<th class="head"><p>기능</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">O</span></code></p></td>
<td><p>PCD 맵 파일 열기</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">S</span></code></p></td>
<td><p>맵 전송 (Localization 시작)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">W</span></code></p></td>
<td><p>Waypoint 전송 (자율주행 시작)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">C</span></code></p></td>
<td><p>Waypoint 초기화</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">R</span></code></p></td>
<td><p>반복 횟수 변경 (1 → 5 → ∞)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">X</span></code></p></td>
<td><p>Initial pose 리셋</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">+/-</span></code></p></td>
<td><p>줌 인/아웃</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Q</span></code></p></td>
<td><p>종료</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id25">
<h3>마우스 조작<a class="headerlink" href="#id25" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>좌클릭</strong>: 워크플로우 단계별 동작 (위치/방향/Waypoint)</p></li>
<li><p><strong>우클릭 드래그</strong>: 화면 이동 (Pan)</p></li>
<li><p><strong>스크롤</strong>: 줌</p></li>
</ul>
</section>
<section id="id26">
<h3>상태 표시<a class="headerlink" href="#id26" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>화면 하단에 현재 단계 및 다음 동작 안내 표시</p></li>
<li><p>Localization 활성화 전에는 Waypoint 추가 불가</p></li>
<li><p>이미 Localization이 활성화된 상태에서 <code class="docutils literal notranslate"><span class="pre">S</span></code> 를 누르면 리셋 안내</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>simple_gui는 <code class="docutils literal notranslate"><span class="pre">zenity</span></code> 패키지를 사용하여 파일 선택 다이얼로그를 표시합니다.
Ubuntu에서 <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">zenity</span></code> 로 설치할 수 있습니다.</p>
</div>
</section>
</section>
<hr class="docutils" />
<section id="cmake-configuration">
<h2>CMake Configuration<a class="headerlink" href="#cmake-configuration" title="Link to this heading"></a></h2>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.16</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">my_controller</span><span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span><span class="w"> </span><span class="s">17</span><span class="p">)</span>

<span class="c"># SDK 경로</span>
<span class="nb">set</span><span class="p">(</span><span class="s">RAISIN_SDK_PATH</span><span class="w"> </span><span class="s2">&quot;/path/to/raisin_sdk_install&quot;</span><span class="p">)</span>

<span class="c"># 의존성</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">Eigen3</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">OpenSSL</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">PCL_INCLUDE_DIRS</span><span class="w"> </span><span class="s2">&quot;/usr/include/pcl-1.12&quot;</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">PCL_LIBRARIES</span><span class="w"> </span><span class="s">pcl_common</span><span class="w"> </span><span class="s">pcl_io</span><span class="p">)</span>

<span class="c"># 실행 파일</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">my_controller</span><span class="w"> </span><span class="s">main.cpp</span><span class="p">)</span>

<span class="nb">target_include_directories</span><span class="p">(</span><span class="s">my_controller</span><span class="w"> </span><span class="s">PRIVATE</span>
<span class="w">    </span><span class="o">${</span><span class="nv">CMAKE_SOURCE_DIR</span><span class="o">}</span><span class="s">/include</span>
<span class="w">    </span><span class="o">${</span><span class="nv">RAISIN_SDK_PATH</span><span class="o">}</span><span class="s">/include</span>
<span class="w">    </span><span class="o">${</span><span class="nv">PCL_INCLUDE_DIRS</span><span class="o">}</span>
<span class="p">)</span>

<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">my_controller</span><span class="w"> </span><span class="s">PRIVATE</span>
<span class="w">    </span><span class="o">${</span><span class="nv">RAISIN_SDK_PATH</span><span class="o">}</span><span class="s">/lib/libraisin_network.so</span>
<span class="w">    </span><span class="o">${</span><span class="nv">RAISIN_SDK_PATH</span><span class="o">}</span><span class="s">/lib/libraisin_thread_pool.so</span>
<span class="w">    </span><span class="o">${</span><span class="nv">RAISIN_SDK_PATH</span><span class="o">}</span><span class="s">/lib/libraisin_parameter.so</span>
<span class="w">    </span><span class="o">${</span><span class="nv">RAISIN_SDK_PATH</span><span class="o">}</span><span class="s">/lib/libraisin_encryption.so</span>
<span class="w">    </span><span class="o">${</span><span class="nv">RAISIN_SDK_PATH</span><span class="o">}</span><span class="s">/lib/libraisin_data_logger.so</span>
<span class="w">    </span><span class="o">${</span><span class="nv">RAISIN_SDK_PATH</span><span class="o">}</span><span class="s">/lib/libraisin_util.so</span>
<span class="w">    </span><span class="o">${</span><span class="nv">RAISIN_SDK_PATH</span><span class="o">}</span><span class="s">/lib/libraisim.so</span>
<span class="w">    </span><span class="o">${</span><span class="nv">RAISIN_SDK_PATH</span><span class="o">}</span><span class="s">/lib/libzstd.so</span>
<span class="w">    </span><span class="s">Eigen3::Eigen</span>
<span class="w">    </span><span class="s">OpenSSL::SSL</span><span class="w"> </span><span class="s">OpenSSL::Crypto</span>
<span class="w">    </span><span class="o">${</span><span class="nv">PCL_LIBRARIES</span><span class="o">}</span>
<span class="w">    </span><span class="s">pthread</span><span class="w"> </span><span class="s">dl</span><span class="w"> </span><span class="s">rt</span>
<span class="p">)</span>

<span class="nb">set_target_properties</span><span class="p">(</span><span class="s">my_controller</span><span class="w"> </span><span class="s">PROPERTIES</span>
<span class="w">    </span><span class="s">BUILD_RPATH</span><span class="w"> </span><span class="s2">&quot;${RAISIN_SDK_PATH}/lib&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<section id="id27">
<h3>연결 실패<a class="headerlink" href="#id27" title="Link to this heading"></a></h3>
<p><strong>증상</strong>: <code class="docutils literal notranslate"><span class="pre">connect()</span></code> 반환값이 false</p>
<p><strong>확인 사항</strong>:</p>
<ol class="arabic simple">
<li><p><a href="#id28"><span class="problematic" id="id29">``</span></a>raisin_master``가 로봇에서 실행 중인지 확인</p></li>
<li><p>동일 네트워크에 있는지 확인</p></li>
<li><p>Robot ID가 정확한지 확인 (raisin_master 콘솔 출력 참조)</p></li>
</ol>
</section>
<section id="id30">
<h3>맵 로드 실패<a class="headerlink" href="#id30" title="Link to this heading"></a></h3>
<p><strong>증상</strong>: <code class="docutils literal notranslate"><span class="pre">setMap()</span></code> 실패 또는 타임아웃</p>
<p><strong>확인 사항</strong>:</p>
<ol class="arabic simple">
<li><p><a href="#id31"><span class="problematic" id="id32">**</span></a>Fast-LIO 플러그인**이 로드되어 있는지 확인 (미로드 시: raisin_plugin 문서의 FastLIO 섹션 참조)</p></li>
<li><p>PCD 파일 경로가 올바른지 확인</p></li>
<li><p>PCD 파일이 손상되지 않았는지 확인 (<a href="#id33"><span class="problematic" id="id34">``</span></a>loadPCD()``로 테스트)</p></li>
</ol>
</section>
<section id="id35">
<h3>로봇이 움직이지 않음<a class="headerlink" href="#id35" title="Link to this heading"></a></h3>
<p><strong>증상</strong>: <code class="docutils literal notranslate"><span class="pre">setWaypoints()</span></code> 성공했지만 로봇이 정지</p>
<p><strong>확인 사항</strong>:</p>
<ol class="arabic simple">
<li><p><a href="#id36"><span class="problematic" id="id37">**</span></a>Autonomy 플러그인**이 로드되어 있는지 확인 (미로드 시: raisin_plugin 문서의 Autonomy 섹션 참조)</p></li>
<li><p><strong>frame 이름이 map_name과 일치하는지 확인</strong> (가장 흔한 원인!)</p></li>
<li><p>Waypoint 좌표가 맵 범위 내에 있는지 확인</p></li>
<li><p>조이스틱 오버라이드 상태가 아닌지 확인</p></li>
</ol>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 흔한 실수</span>
<span class="n">client</span><span class="p">.</span><span class="n">setMap</span><span class="p">(</span><span class="s">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;office_map&quot;</span><span class="p">);</span>
<span class="n">client</span><span class="p">.</span><span class="n">setWaypoints</span><span class="p">({</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)},</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// ✗ &quot;map&quot; != &quot;office_map&quot;</span>

<span class="c1">// 올바른 사용</span>
<span class="n">client</span><span class="p">.</span><span class="n">setMap</span><span class="p">(</span><span class="s">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;office_map&quot;</span><span class="p">);</span>
<span class="n">client</span><span class="p">.</span><span class="n">setWaypoints</span><span class="p">({</span><span class="n">Waypoint</span><span class="p">(</span><span class="s">&quot;office_map&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)},</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// ✓</span>
</pre></div>
</div>
</section>
<section id="id38">
<h3>서비스 응답 메시지 목록<a class="headerlink" href="#id38" title="Link to this heading"></a></h3>
<p><strong>SetWaypoints:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;set</span> <span class="pre">waypoint</span> <span class="pre">success&quot;</span></code> - 성공</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;waypoint</span> <span class="pre">list</span> <span class="pre">is</span> <span class="pre">empty&quot;</span></code> - 빈 목록</p></li>
</ul>
<p><strong>SetMap (SetLaserMap):</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;Map</span> <span class="pre">saved.&quot;</span></code> - 성공</p></li>
<li><p>타임아웃 - Fast-LIO 플러그인 미로드</p></li>
</ul>
<p><strong>GetWaypoints:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;get</span> <span class="pre">waypoint</span> <span class="pre">success&quot;</span></code> - 성공</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id39">
<h2>관련 문서<a class="headerlink" href="#id39" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>raisin_master 문서</strong>: 로봇 설정 및 플러그인 로드 방법</p></li>
<li><p><strong>raisin_plugin 문서</strong>: Autonomy, Fast-LIO 플러그인 상세</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Link to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Raion Robotics..</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>