

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Raisin Master &mdash; raisin 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css?v=2a6c4383" />
      <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css?v=45cf7dbc" />
      <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css?v=d290406d" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Raisin Network" href="RaisinNetwork.html" />
    <link rel="prev" title="Installation" href="Installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            raisin
              <img src="../_static/logo_f2-02.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Raisin Master</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#raisin-package">Raisin Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cmakelists-file">CMakeLists file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build">Build</a></li>
<li class="toctree-l2"><a class="reference internal" href="#video-tutorial">Video Tutorial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="RaisinNetwork.html">Raisin Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="Parameter.html">Parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataLogger.html">DataLogger</a></li>
<li class="toctree-l1"><a class="reference internal" href="RaiboNode.html">RaiboNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="RaisinGui.html">Raisin Gui</a></li>
<li class="toctree-l1"><a class="reference internal" href="Reference.html">Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">raisin</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Raisin Master</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="raisin-master">
<h1>Raisin Master<a class="headerlink" href="#raisin-master" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>Raisin Master is a fast, lightweight build system designed to replace colcon in ROS2.
It leverages the efficiency of CMake by acting as a CMake script generator to streamline the build process for raisin-based projects.
In essence, Raisin Master is powered by Python scripts that set up the CMake build environment and provide helper functions.
All you need to get started is knowledge of CMake.</p>
<p><strong>Key Benefits</strong></p>
<ul class="simple">
<li><p><strong>Faster Build Times Compared to Colcon+ROS2</strong>: Since Raisin Master simply generates CMake scripts, its performance is as fast as CMake itself. Script generation typically takes less than a second, and builds can be further accelerated with ninja-build &lt;<a class="reference external" href="https://ninja-build.org/">https://ninja-build.org/</a>&gt;_, the recommended tool. Although detailed benchmarks are pending, our internal project compiles in about 35 seconds with Raisin Master versus over 4 minutes with colcon. Improved message and service handling also contribute to its speed.</p></li>
<li><p><strong>IDE Support</strong>: Being almost entirely implemented in pure CMake, Raisin Master integrates seamlessly with popular IDEs such as CLion and VSCode. This enables advanced debugging features like pausing execution, setting breakpoints, and evaluating variables in real time.</p></li>
<li><p><strong>No Installation Required</strong>: Simply clone the repository and start using Raisin Master immediately. There is no bulky installation process; removing the directory completely eliminates all components of Raisin Master.</p></li>
<li><p><strong>Streamlined Development Workflow</strong>: Unlike colcon, which installs every package it builds, Raisin Master installs packages only when you are ready to release your software. This avoids unnecessary file duplication (e.g., header files) that could confuse both the IDE and the user, while reducing overhead.</p></li>
<li><p><strong>Enhanced Compatibility</strong>: Many existing C++ packages support CMake but not colcon. Most modern CMake packages already satisfy the requirements for a Raisin package, allowing for straightforward integration with Raisin Master. Additionally, utilities are provided to convert existing ROS2 packages into Raisin packages.</p></li>
</ul>
<p>Directory Structure
The following directories are part of Raisin Master:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">include</span></code>: Contains header files for directory and time management.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">install</span></code>: All Raisin packages are installed in this folder. Raisin Master’s CMake configuration enforces that the CMAKE_INSTALL_PREFIX points to this directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code>: Holds all Raisin packages.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">templates</span></code>: Contains templates for generating message, service, and CMake files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">messages</span></code>: Stores basic and common message and service definitions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generated</span></code>: Contains generated message and service files, which are produced from the definitions and used in C++ code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log</span></code>: Logging data from the packages will go here.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">raisin_workspace_setup.py</span></code>: The primary file to be familiar with is raisin_workspace_setup.py. Before building any Raisin packages, run this Python script. It performs the following tasks:</p>
<blockquote>
<div><ul class="simple">
<li><p>Convert Message Definitions: Transforms message definitions into corresponding message header files.</p></li>
<li><p>Generate the Master CMakeLists.txt File: Automatically adds all projects from the src directory to the CMakeLists.txt file using add_subdirectory(). The script organizes packages based on their dependencies by parsing each package’s CMakeLists.txt file. (It ignores the packages inside <strong>RAISIN_IGNORE</strong>)</p></li>
<li><p>Create a Release File: Generates a release.txt file that lists the commit hash for each Git repository within the src directory.</p></li>
<li><p>Copy Resource Directories: Copy the resource, config, and scripts directories from each package in the src directory to install directory.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Note that some directories are created during runtime and you might not see them at first.</p>
<p><strong>The directory will be referred to as $RAISIN_WS throughout this documentation.</strong></p>
</section>
<section id="raisin-package">
<h2>Raisin Package<a class="headerlink" href="#raisin-package" title="Link to this heading"></a></h2>
<p>A Raisin package is a set of files in a directory containing a CMakeLists.txt file—even if the file is empty.
Note that subdirectories within a Raisin package cannot be treated as separate Raisin packages.</p>
<p>A typical raisin package looks like this</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>my_project/
├── resource/
├── scripts/
├── config/
├── msg/
├── srv/
├── include/
├   └── my_project/
├       └── my_project.hpp
├── src/
├   └── my_project.cpp
└── CMakeLists.txt
</pre></div>
</div>
<p>Requirements for a Raisin package include:</p>
<p>1. <strong>Directory Structure</strong>:
Header files must reside in the <code class="docutils literal notranslate"><span class="pre">include/${PROJECT_NAME}/</span></code> directory.
Source files should be placed in the <code class="docutils literal notranslate"><span class="pre">src</span></code> directory.</p>
<p>2. <strong>Resource Organization</strong>:
Resources should be stored in the <code class="docutils literal notranslate"><span class="pre">resource</span></code> directory.
Python and Bash scripts should be located in the <code class="docutils literal notranslate"><span class="pre">scripts</span></code> directory.
Parameter files should be placed in the <code class="docutils literal notranslate"><span class="pre">config</span></code> directory.
Message files should be placed in the <code class="docutils literal notranslate"><span class="pre">msg</span></code> directory.
Service files should be placed in the <code class="docutils literal notranslate"><span class="pre">srv</span></code> directory.
Explanation about messages and services will be given in the Raisin Network section.</p>
<p>3. <strong>Naming Conventions</strong>:
The project name must match the name of the Raisin package directory.</p>
<p>4. <strong>Dependency Management</strong>:
Use <code class="docutils literal notranslate"><span class="pre">raisin_find_package</span></code> (instead of the standard <code class="docutils literal notranslate"><span class="pre">find_package</span></code>) to locate other Raisin packages.
<a href="#id1"><span class="problematic" id="id2">``</span></a>raisin_find_package``is explained further in the following section.</p>
</section>
<section id="cmakelists-file">
<h2>CMakeLists file<a class="headerlink" href="#cmakelists-file" title="Link to this heading"></a></h2>
<p>There are no constraints on the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file
Below is an example of a typical <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file for a Raisin package:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.5</span><span class="p">)</span>

<span class="c">## write your package name</span>
<span class="nb">project</span><span class="p">(</span><span class="s">raisin_package</span><span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">ENV{RAISIN_WS}</span><span class="w"> </span><span class="s2">&quot;../&quot;</span><span class="p">)</span><span class="w"> </span><span class="c">## set the path to your raisin workspace</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_PREFIX_PATH</span><span class="w"> </span><span class="o">$ENV{</span><span class="nv">RAISIN_WS</span><span class="o">}</span><span class="s">/install</span><span class="p">)</span>

<span class="nb">raisin_find_package</span><span class="p">(</span><span class="s">raisin_network</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>

<span class="c">## added your dependencies here</span>
<span class="nb">add_library</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">SHARED</span>
<span class="w">    </span><span class="s">src/raisin_package.cpp</span>
<span class="p">)</span>

<span class="nb">target_link_libraries</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">raisin_network</span><span class="p">)</span>
<span class="nb">target_include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">PUBLIC</span>
<span class="w">        </span><span class="s2">&quot;$&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include&gt;&quot;</span>
<span class="w">        </span><span class="s2">&quot;$&lt;INSTALL_INTERFACE:include&gt;&quot;</span><span class="p">)</span>
<span class="nb">target_include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w">  </span><span class="o">$ENV{</span><span class="nv">RAISIN_WS</span><span class="o">}</span><span class="s">/install</span><span class="p">)</span>

<span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">PROPERTY</span><span class="w"> </span><span class="s">POSITION_INDEPENDENT_CODE</span><span class="w"> </span><span class="s">ON</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">ex</span><span class="w"> </span><span class="s">src/example.cpp</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">ex</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="p">)</span>

<span class="c">## write your install dependencies here</span>
<span class="nb">raisin_install</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">raisin_network</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>project:</strong> Defines the name of the project.</p>
<p><strong>set:</strong> Sets the RAISIN_WS environment variable. ## It should point to the root of the raisin workspace (typically “../”). set(ENV{RAISIN_WS} “../”)</p>
<p><strong>raisin_find_package:</strong> runs <a href="#id3"><span class="problematic" id="id4">``</span></a>find_package** under the hood if the library is not part of the build targets, in other words, if it does nothing if the dependency is not part of the build.</p>
<p><strong>add_library:</strong> Creates a shared library containing the source code for the node.</p>
<p><strong>target_link_libraries:</strong> inks the shared library to raisin_network.</p>
<p><strong>target_include_directories:</strong> Adds additional private include path for dependencies from the Raisin workspace.</p>
<p><strong>set_property:</strong> Enables position-independent code, which is required for shared libraries.</p>
<p><strong>raisin_install:</strong> performs several commands necessary for install the package, like creating the config file, installing the <code class="docutils literal notranslate"><span class="pre">include</span></code> directory, defining the export set, etc.</p>
<p><strong>{PROJECT_NAME}:</strong> are the dependencies. The auto-generated config file will call <code class="docutils literal notranslate"><span class="pre">find_package</span></code> for each dependencies. The definitions can be found in <code class="docutils literal notranslate"><span class="pre">cmake/raisin_helper</span></code></p>
<p>There is also an expert version of <code class="docutils literal notranslate"><span class="pre">raisin_install</span></code>.
An example follows:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">raisin_install_config_string</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">    find_package(raisim REQUIRED)</span>
<span class="s2">    get_filename_component(RAISIN_INSTALL_DIR \&quot;</span><span class="s">\${CMAKE_CURRENT_LIST_DIR}\&quot;</span><span class="w"> </span><span class="s">DIRECTORY</span><span class="p">)</span>
<span class="w">    </span><span class="nb">get_filename_component</span><span class="p">(</span><span class="s">RAISIN_INSTALL_DIR</span><span class="w"> </span><span class="s">\&quot;\${RAISIN_INSTALL_DIR}/../..\&quot;</span><span class="w"> </span><span class="s">ABSOLUTE</span><span class="p">)</span>
<span class="w">    </span><span class="nb">add_compile_definitions</span><span class="p">(</span><span class="s">\${PROJECT_NAME}</span><span class="w"> </span><span class="s">INTERFACE</span><span class="w"> </span><span class="s">\&quot;RAISIN_INSTALL_DIR=\${RAISIN_INSTALL_DIR}/\&quot;)</span>
<span class="err">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">raisin_install_config_string</span></code> lets you customize the config file.
The string will be added to the config file.</p>
</section>
<section id="build">
<h2>Build<a class="headerlink" href="#build" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>raisin_workspace_setup.py

mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>..<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release<span class="w"> </span>-G<span class="w"> </span>Ninja
ninja<span class="w"> </span>-j8<span class="w"> </span>install
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Avoid building the project using sudo su, as it may lead to permission issues.</p>
</div>
</section>
<section id="video-tutorial">
<h2>Video Tutorial<a class="headerlink" href="#video-tutorial" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>How to create your own raisin pacakge and build it in Raisin Master.</p></li>
</ol>
<iframe width="560" height="315" src="https://www.youtube.com/embed/zUZwiI6xp6U?si=fexkBLAAN7Qz42y5" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="RaisinNetwork.html" class="btn btn-neutral float-right" title="Raisin Network" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Raion Robotics..</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>